<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">

    <link href="https://code.jquery.com/ui/1.12.1/themes/cupertino/jquery-ui.min.css" rel="stylesheet" type="text/css"
          media="all"/>
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/all.min.css" rel="stylesheet"
          type="text/css" media="all"/>

    <link rel="stylesheet" href="build/pedigreejs.v3.0.0-rc8.css"/>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.8.2/dist/d3.min.js"
            integrity="sha256-yUdn/lyl/rHBn4bD4HkKmnR7S6Fj+tXIO0ozSay1Bik=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>


    <style>
        a[href^="http://"][target=_blank]:after,
        a[href^="https://"][target=_blank]:after,
        a[href^="ftp://"][target=_blank]:after {
            content: "\f08e";
            font-family: FontAwesome;
            font-weight: normal;
            font-style: normal;
            display: inline-block;
            text-decoration: none;
            padding: 0px 2px;
            display: inline;
        }


        .row > div {
            margin-right: 10px;
        }


        @media screen and (min-width: 768px) {

            .header h1 {
                font-size: 63px;
                font-weight: 500;
                line-height: 1.1;
                margin: 10px 0;
            }

            .header h2 {
                font-size: 30px;
                margin-top: 20px;
                margin-bottom: 10px;
                font-weight: 500;
            }
        }

        body {
            margin: 0;
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 14px;
            line-height: 1.42857143;
            color: #333;
            background-color: #fff;
        }


        #pedigree_history {
            padding: 10px;
        }

        .text-center {
            text-align: center;
            padding: 0 20px;
        }
    </style>


</head>

<body>

<div class="">
    <div style="margin-left:20px;" class="pull-right">
        <div class="text-center">
            <label class="btn">
                <input id="load" type="file" style="display: none;"/>Load
            </label>
            <label class="btn">
                <input id="save" type="button" style="display: none;"/>Save
            </label>

            <label class="btn">
                <input id="print" type="button" style="display: none;"/>Print
            </label>
            <label class="btn">
                <input id="svg_download" type="button" style="display: none;"/>SVG
            </label>
            <label class="btn">
                <input id="png_download" type="button" style="display: none;"/>PNG
            </label>

            <div id="pedigrees"></div>
            <div id="node_properties"></div>

            <br/>
            <label class="btn">
                <input id="save-boadicea" type="button" style="display: none;"/>Save (BOADICEA v4 format)
            </label>
            <label class="btn">
                <input id="save-canrisk" type="button" style="display: none;"/>Save (CanRisk format)
            </label>
        </div>
    </div>

</div>

<script type="module" src="src/pedigree.ts"></script>
<script type="module">
    import {build} from "@/pedigree";
    import {process_ped} from "@/io.js";

    $(document).ready(function () {
        ////////////////////
        var dataset = [{
            "famid": "11-5555-156325",
            "display_name": "Ich",
            "proband": true,
            "name": "P1",
            "sex": "F",
            "status": "0",
            "age": 40,
            "yob": 1985,
            "father": "P2",
            "mother": "P3"
        }, {
            "famid": "11-5555-156325",
            "display_name": "[Mein Vater]",
            "proband": false,
            "name": "P2",
            "sex": "M",
            "status": "0",
            "age": 68,
            "yob": 1957,
            "father": "P4",
            "mother": "P5",
        }, {
            "famid": "11-5555-156325",
            "display_name": "[Meine Mutter]",
            "proband": false,
            "name": "P3",
            "sex": "F",
            "status": "0",
            "age": 68,
            "yob": 1957,
            "father": "P13",
            "mother": "P14",
        }, {
            "famid": "11-5555-156325",
            "display_name": "Françoise",
            "proband": false,
            "name": "P5",
            "sex": "F",
            "status": "0",
            "age": 83,
            "yob": 1942,
            "top_level": true
        }, {
            "famid": "11-5555-156325",
            "display_name": "Albert",
            "proband": false,
            "name": "P4",
            "sex": "M",
            "status": "0",
            "age": 87,
            "yob": 1938,
            "top_level": true
        }, {
            "famid": "11-5555-156325",
            "display_name": "Olivier",
            "proband": false,
            "name": "P6",
            "sex": "M",
            "status": "0",
            "age": 65,
            "yob": 1960,
            "father": "P4",
            "mother": "P5",
        }, {
            "famid": "11-5555-156325",
            "display_name": "Gérard",
            "proband": false,
            "name": "P7",
            "sex": "M",
            "status": "0",
            "age": 87,
            "yob": 1938,
            "top_level": true
        }, {
            "famid": "11-5555-156325",
            "display_name": "Steph",
            "proband": false,
            "name": "P8",
            "sex": "F",
            "status": "0",
            "age": 55,
            "yob": 1970,
            "father": "P7",
            "mother": "P5"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Gilles",
            "proband": false,
            "name": "P9",
            "sex": "M",
            "status": "0",
            "age": 53,
            "yob": 1972,
            "father": "P7",
            "mother": "P5",
        }, {
            "famid": "11-5555-156325",
            "display_name": "Emilie",
            "proband": false,
            "name": "P30",
            "sex": "F",
            "status": "0",
            "age": 45,
            "yob": 1980,
            "noparents": true,
            "mother": "P5",
            "father": "P7"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Jules",
            "proband": false,
            "name": "P31",
            "sex": "M",
            "status": "0",
            "age": 19,
            "yob": 2006,
            "mztwin": "1",
            "father": "P9",
            "mother": "P30"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Louis",
            "proband": false,
            "name": "P32",
            "sex": "M",
            "status": "0",
            "age": 19,
            "yob": 2006,
            "mztwin": "1",
            "father": "P9",
            "mother": "P30"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Nadine",
            "proband": false,
            "name": "P10",
            "sex": "F",
            "status": "0",
            "age": 75,
            "yob": 1950,
            "top_level": true
        }, {
            "famid": "11-5555-156325",
            "display_name": "Caro",
            "proband": false,
            "name": "P11",
            "sex": "F",
            "status": "0",
            "age": 55,
            "yob": 1970,
            "father": "P4",
            "mother": "P10"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Maga",
            "proband": false,
            "name": "P12",
            "sex": "F",
            "status": "0",
            "age": 52,
            "yob": 1973,
            "father": "P4",
            "mother": "P10"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Marie",
            "proband": false,
            "name": "P14",
            "sex": "F",
            "status": "1",
            "yob": 1940,
            "top_level": true
        }, {
            "famid": "11-5555-156325",
            "display_name": "Gabriel",
            "proband": false,
            "name": "P13",
            "sex": "M",
            "status": "1",
            "yob": 1938,
            "level": 2,
            "top_level": true
        }, {
            "famid": "11-5555-156325",
            "display_name": "Monique",
            "proband": false,
            "name": "P15",
            "sex": "F",
            "status": "0",
            "age": 62,
            "yob": 1963,
            "father": "P13",
            "mother": "P14",
        }, {
            "famid": "11-5555-156325",
            "display_name": "[Bruder 2]",
            "proband": false,
            "name": "P16",
            "sex": "M",
            "status": "0",
            "age": 73,
            "yob": 1952,
            "father": "P13",
            "mother": "P14"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Michelle",
            "proband": false,
            "name": "P17",
            "sex": "F",
            "status": "0",
            "age": 78,
            "yob": 1947,
            "father": "P13",
            "mother": "P14",
        }, {
            "famid": "11-5555-156325",
            "display_name": "[Partner 1]",
            "proband": false,
            "name": "P18",
            "sex": "M",
            "status": "0",
            "age": 65,
            "yob": 1960,
            "noparents": true,
            "mother": "P14",
            "father": "P13"
        }, {
            "famid": "11-5555-156325",
            "display_name": "[Tochter 1]",
            "proband": false,
            "name": "P19",
            "sex": "F",
            "status": "0",
            "age": 40,
            "yob": 1985,
            "father": "P18",
            "mother": "P15"
        }, {
            "famid": "11-5555-156325",
            "display_name": "[Sohn 2]",
            "proband": false,
            "name": "P20",
            "sex": "M",
            "status": "0",
            "age": 36,
            "yob": 1989,
            "father": "P18",
            "mother": "P15"
        }, {
            "famid": "11-5555-156325",
            "display_name": "[Tochter 3]",
            "proband": false,
            "name": "P21",
            "sex": "F",
            "status": "0",
            "age": 31,
            "yob": 1994,
            "father": "P18",
            "mother": "P15"
        }, {
            "famid": "11-5555-156325",
            "display_name": "[Partner 1]",
            "proband": false,
            "name": "P22",
            "sex": "M",
            "status": "0",
            "age": 78,
            "yob": 1947,
            "noparents": true,
            "mother": "P14",
            "father": "P13"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Thibaud",
            "proband": false,
            "name": "P23",
            "sex": "M",
            "status": "0",
            "age": 50,
            "yob": 1975,
            "father": "P22",
            "mother": "P17"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Michelle - Partner 2",
            "proband": false,
            "name": "P24",
            "sex": "M",
            "status": "0",
            "age": 75,
            "yob": 1950,
            "noparents": true,
            "mother": "P14",
            "father": "P13"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Noelle",
            "proband": false,
            "name": "P25",
            "sex": "F",
            "status": "0",
            "age": 50,
            "yob": 1975,
            "father": "P24",
            "mother": "P17"
        }, {
            "name": "mdlJ",
            "sex": "M",
            "mother": "P17",
            "father": "P26",
            "noparents": true
        }, {
            "famid": "11-5555-156325",
            "display_name": "Michelle - Partner 3",
            "proband": false,
            "name": "P26",
            "sex": "M",
            "status": "0",
            "age": 72,
            "yob": 1953,
            "noparents": true,
            "mother": "P14",
            "father": "P13"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Emilie",
            "proband": false,
            "name": "P27",
            "sex": "F",
            "status": "0",
            "age": 43,
            "yob": 1982,
            "father": "P26",
            "mother": "P17"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Connie",
            "proband": false,
            "name": "P28",
            "sex": "F",
            "status": "0",
            "age": 60,
            "yob": 1965,
            "noparents": true,
            "mother": "P5",
            "father": "P4"
        }, {"name": "UVNA", "sex": "F", "mother": "P27", "father": "mdlJ"}, {
            "name": "QiGr",
            "sex": "M",
            "mother": "P27",
            "father": "mdlJ"
        }, {"name": "hhAJ", "sex": "F", "mother": "P27", "father": "mdlJ", "miscarriage": true}, {
            "name": "YUQg",
            "sex": "F",
            "mother": "P27",
            "father": "mdlJ"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Suzanne",
            "proband": false,
            "name": "P29",
            "sex": "F",
            "status": "0",
            "age": 29,
            "yob": 1996,
            "father": "P6",
            "mother": "P28"
        }, {
            "famid": "11-5555-156325",
            "display_name": "Marie [Partner 2]",
            "proband": false,
            "name": "P33",
            "sex": "M",
            "status": "0",
            "age": 85,
            "yob": 1940,
            "top_level": true
        }, {
            "famid": "11-5555-156325",
            "display_name": "[Sohn 1]",
            "proband": false,
            "name": "P34",
            "sex": "M",
            "status": "0",
            "age": 62,
            "yob": 1963,
            "father": "P33",
            "mother": "P14"
        }];
        //var dataset =
        $("#pedigrees").append($("<div id='pedigree_history'></div>"));
        $("#pedigrees").append($("<div id='pedigree'></div>"));

        var opts = {
            'targetDiv': 'pedigree',
            'btn_target': 'pedigree_history',
            //	'nodeclick': pedigree_form.nodeclick,
            'width': ($(window).width() > 450 ? 1500 : $(window).width() - 30),
            'height': 700,
            'symbol_size': 25,
            'edit': true,
            'store_type': 'array',
            'zoomSrc': ['wheel'],
            'zoomIn': .05,
            'zoomOut': 1.5,
            'optionalLabels': [
                ['brca1_gene_test', 'brca2_gene_test', 'palb2_gene_test', 'chek2_gene_test', 'atm_gene_test'],
                ['rad51d_gene_test', 'rad51c_gene_test', 'brip1_gene_test'],
                ['er_bc_pathology', 'pr_bc_pathology', 'her2_bc_pathology', 'ck14_bc_pathology', 'ck56_bc_pathology']],
            'labels': [['age', 'yob'],
                ['brca1_gene_test', 'brca2_gene_test', 'palb2_gene_test', 'chek2_gene_test', 'atm_gene_test'],
                ['rad51d_gene_test', 'rad51c_gene_test', 'brip1_gene_test'],
                ['er_bc_pathology', 'pr_bc_pathology', 'her2_bc_pathology', 'ck14_bc_pathology', 'ck56_bc_pathology']],
            'diseases': [{'type': 'breast_cancer', 'colour': '#F68F35'},
                {'type': 'breast_cancer2', 'colour': 'pink'},
                {'type': 'ovarian_cancer', 'colour': '#4DAA4D'},
                {'type': 'pancreatic_cancer', 'colour': '#4289BA'},
                {'type': 'prostate_cancer', 'colour': '#D5494A'}],
            'DEBUG': false
        };
        //opts.dataset = process_ped(dataset);
        opts.dataset = dataset;
        opts = build(opts);
    });

</script>
</body>

</html>
